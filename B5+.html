<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>B5+</title>
  </head>
  <body>
    <script>
      function buildWrapper(tag) {
        return function (text, atribute) {
          const splited = text.split("");
          let arr=[];
          arr.push(atribute);
          let newText = "";
          function change(a) {
            const dict = {
              "<": "&lt",
              ">": "&gt",
              "'": "&apos",
              '"': "&quot",
              "&": "&amp",
            };
            if(a in dict)
            return dict[a];
            return a
          }
          for(let i of splited){
            newText+=change(i)
          }
          return `<${tag}>${arr}${newText}</${tag}>`
        };
        return function(atrib){ return `<${tag}>${arr}${newText}</${tag}>`
          
        }
        
         

        
        
      }

      const wrapP=buildWrapper('P');
      // console.log( wrapP("Однажды в студёную зимнюю пору") );
      console.log( wrapP("Однажды в студёную зимнюю пору",{lang:"ru"}) );

    </script>
  </body>
</html>
